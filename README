This is to build sdcard image for ROC-RK3338-CC:

Parts needed:
1. ROC-RK3338-CC SBC.
2. Sandisk 64GB micro sdcard.
3. Host PC with ubuntu 24.
4. ASUS USB-BT500 bluetooth usb dongle.

Steps to build ROC-RK3338-CC sdcard image:

1. git clone https://github.com/philipchen888/build-roc-rk3328-cc.git
   sudo apt update
   sudo apt upgrade
   sudo apt-get install build-essential git libssl-dev nmap net-tools libncurses5-dev libncursesw5-dev dnsutils vsftpd ftp binfmt-support qemu-user-static scons libncurses5-dev libncursesw5-dev libdbus-glib-1-dev libbluetooth-dev python3-dev python3-pip python3-setuptools libcurl4-openssl-dev gettext dbus-x11 chrpath diffstat gawk texinfo curl flex bison device-tree-compiler swig libmpc-dev debootstrap debhelper kpartx gdisk devscripts isolinux po4a libgnutls28-dev mtools python-is-python3 python3-pyelftools gcc-aarch64-linux-gnu

2. Install live-build:
   sudo apt-get install debootstrap debhelper kpartx gdisk devscripts isolinux po4a live-build

   lb --version ( 3.0~a57-1 /usr/bin/lb )

   For trixie and bookworm:
   wget http://deb.debian.org/debian/pool/main/l/live-build/live-build_20250505.tar.xz
   tar xvf live-build_20250505.tar.xz
   cd work
   sudo make install
   lb --version ( 20250505 /usr/bin/lb )

3. cd ~/build-roc-rk3328-cc/uboot  ( Compile u-boot )
   git clone https://github.com/u-boot/u-boot.git -b master --depth=1
   mkdir out
   make u-boot

   The results are in ./out/u-boot.img, idbloader.img, trust.img

4. cd ~/build-roc-rk3328-cc/kernel ( compile vendor kernel )
   git clone https://github.com/radxa/kernel.git --depth=1 -b linux-6.17.1
   \rm -rf out; mkdir out;
   make kernel

   The result is in ./out/boot.img

5. cd ~/build-roc-rk3328-cc/linux  ( compile mainline kernel )
   wget https://git.kernel.org/torvalds/t/linux-6.17-rc7.tar.gz
   tar -xzf linux-6.17-rc7.tar.gz
   mv linux-6.17-rc7 linux
   vi linux/arch/arm64/boot/dts/rockchip/rk3328-roc.dtsi ( change  i2c1  uart1 spi0 pwm2 )
   \rm -rf out; mkdir out;
   make kernel

   The result is in ./out/boot.img

6. cd ~/build-roc-rk3328-cc/rootfs-bookworm  ( Compile debian bookworm rootfs )
   make rootfs
   The result is in ./linaro-rootfs.img
   make clean

7. cd ~/build-roc-rk3328-cc/rootfs-trixie  ( Compile debian trixie rootfs )
   make rootfs
   The result is in ./linaro-rootfs.img
   make clean

8. cd ~/build-roc-rk3328-cc/rootfs-ubuntu-noble  ( Compile debian ubuntu-noble rootfs )
   make rootfs
   The result is in ./linaro-rootfs.img
   make clean

9. cd ~/build-roc-rk3328-cc/rootfs-ubuntu-plucky  ( Compile debian ubuntu-plucky rootfs )
   make rootfs
   The result is in ./linaro-rootfs.img
   make clean

10. cd ~/build-roc-rk3328-cc/bookworm-gnome  ( Build debian bookworm gnome-desktop image )
    Plugin sdcard to PC.
    sudo ./mksdcardimg.sh
    Eject sdcard from PC.

11. cd ~/build-roc-rk3328-cc/trixie-gnome  ( Build debian trixie gnome-desktop image )
    Plugin sdcard to PC.
    sudo ./mksdcardimg.sh
    Eject sdcard from PC.

12. cd ~/build-roc-rk3328-cc/ubuntu-noble  ( Build ubuntu-noble image )
    Plugin sdcard to PC.
    sudo ./mksdcardimg.sh
    Eject sdcard from PC.

13. cd ~/build-roc-rk3328-cc/ubuntu-plucky  ( Build ubuntu-plucky image )
    Plugin sdcard to PC.
    sudo ./mksdcardimg.sh
    Eject sdcard from PC.

14. cd ~/build-roc-rk3328-cc/yocto  ( Build yocto image )

15. cd ~/build-roc-rk3328-cc/yocto-lxde  ( Build yocto lxde-desktop image )

16. cd ~/build-roc-rk3328-cc/yocto-xfce  ( Build yocto xfce-desktop image )

17. cd ~/build-roc-rk3328-cc/buildroot   ( Build buildroot image )

18. cd ~/build-roc-rk3328-cc/bullseye-gpio  ( gpio test in bullseye-lxde )

19. cd ~/build-roc-rk3328-cc/bullseye-pn532nfc  ( pn532nfc test in bullseye-lxde )

20. cd ~/build-roc-rk3328-cc/bullseye-flightaware  ( flightaware in bullseye-lxde ) 

21. cd ~/build-roc-rk3328-cc/baremetal-gpio  ( gpio test in baremetal )
